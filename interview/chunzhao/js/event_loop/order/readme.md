# 事件循环

JavaScript 的事件循环（event loop）是一种机制，它负责执行异步代码并管理调用栈与任务队列之间的交互，确保异步操作如定时器、 promises 和 I/O 操作能够在适当的时候被执行。简而言之，事件循环使得 JavaScript 能够无阻塞的执行异步代码，而无需多线程。

当第一个宏任务进入主线程，进行第一次事件循环，如遇到宏任务，则将其分发到宏任务队列中，若遇到微任务，则将其分发到微任务队列中。同步代码执行完毕，微任务队列先进入主线程直至任务执行完毕，下一个宏任务进入主线程开始下一次的事件循环。以上过程会不断重复，直到宏任务队列全部执行完毕，这就是Javascript中的事件循环机制了。

微任务总是优先于下一个宏任务执行，但并非所有微任务都比所有宏任务早。事件循环通过“执行一个宏任务 → 清空微任务队列”的循环确保这一顺序。

- 事件
 - 微任务
 - 宏任务
- 循环
  同步任务 清空执行栈 -》 微任务 清空微任务队列 -》 宏任务（每次一个）

- script本身是一个宏任务
- 